<!-- Page Content -->
<div class="dashboard-sec payout-section freelancer-statements">
  <div class="page-title portfolio-title">
    <h3 class="mb-0">Gestion Mot de Passe</h3>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="input-block">
        <label for="old-password" class="focus-label"
          >Ancien mot de passe
        </label>
        <div class="position-relative">
          <input
            [type]="password[1] ? 'text' : 'password'"
            class="form-control floating pass-input"
            [ngModel]="oldPassword"
            (ngModelChange)="onOldPasswordInput($event)"
            [ngClass]="{
              'is-invalid': oldPasswordStatus === false,
              'is-valid': oldPasswordStatus === true,
            }"
          />
          <div
            class="password-icon"
            (click)="togglePassword(1)"
            (keydown.enter)="togglePassword(1)"
            tabindex="0"
          >
            <span
              class="fas toggle-password me-4"
              [ngClass]="password[1] ? 'fa-eye' : 'fa-eye-slash'"
            ></span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-12">
      <div class="input-block">
        <label for="new-password" class="focus-label"
          >Nouveau mot de passe
        </label>
        <div class="position-relative">
          <input
            [type]="password[2] ? 'text' : 'password'"
            class="form-control floating pass-input1"
            [ngModel]="newPassword"
            (ngModelChange)="onNewPasswordInput($event)"
            [ngClass]="{
              'is-invalid': newPassword.length > 0 && !newPasswordValid,
              'is-valid': newPasswordValid
            }"
            (copy)="$event.preventDefault()"
          />
          <div
            *ngIf="newPassword.length > 0 && !newPasswordValid"
            class="text-danger mt-1"
          >
            <ul class="mb-0 ps-3">
              <li *ngIf="!pwMinLength">Contient au moins 8 caractères</li>
              <li *ngIf="!pwUppercase">Contient au moins une majuscule</li>
              <li *ngIf="!pwNumber">Contient au moins un chiffre</li>
              <li *ngIf="!pwSymbol">
                Contient au moins un symbole (caractère spécial)
              </li>
            </ul>
          </div>
          <div
            class="password-icon"
            (click)="togglePassword(2)"
            (keydown.enter)="togglePassword(2)"
            tabindex="0"
          >
            <span
              class="fas toggle-password1 me-4"
              [ngClass]="password[2] ? 'fa-eye' : 'fa-eye-slash'"
            ></span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-12">
      <div class="input-block">
        <label for="confirm-password" class="focus-label"
          >Confirmer le mot de passe</label
        >
        <div class="position-relative">
          <input
            [type]="password[3] ? 'text' : 'password'"
            class="form-control floating pass-inputs"
            [ngModel]="confirmPassword"
            (ngModelChange)="onConfirmPasswordInput($event)"
            [ngClass]="{
              'is-invalid': confirmPassword.length > 0 && !confirmPasswordValid,
              'is-valid': confirmPasswordValid
            }"
            (paste)="$event.preventDefault()"
          />
          <div
            *ngIf="confirmPassword.length > 0 && !confirmPasswordValid"
            class="text-danger mt-1"
          >
            Les mots de passe ne correspondent pas
          </div>
          <div
            class="password-icon"
            (click)="togglePassword(3)"
            (keydown.enter)="togglePassword(3)"
            tabindex="0"
          >
            <span
              class="fas toggle-passwords fa-eye-slash me-4"
              [ngClass]="password[3] ? 'fa-eye' : 'fa-eye-slash'"
            ></span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-12">
      <div class="d-flex doc-btn">
        <a href="javascript:void(0);" class="btn btn-gray" (click)="reset()"
          >Annuler</a
        >
        <button
          [disabled]="
            !oldPasswordStatus || !newPasswordValid || !confirmPasswordValid
          "
          type="button"
          class="btn btn-primary"
          (click)="ngsubmit()"
        >
          Mettre à jour
        </button>
        >
      </div>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div class="modal fade success-modal hire-modal" id="password-changed">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content" style="background-color: #a3cfbb">
      <div class="modal-body pt-4">
        <div class="success-msg-content text-center">
          Vos données ont été modifiées avec <strong>succès</strong>.
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Success Modal -->
<!-- Error Modal -->
<div class="modal fade error-modal hire-modal" id="password-error">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content bg-danger">
      <div class="modal-body pt-4">
        <div class="error-msg-content text-center">
          <strong>Error! </strong> Une erreur s'est produite côté serveur.
          Veuillez réessayer plus tard.
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Error Modal -->
